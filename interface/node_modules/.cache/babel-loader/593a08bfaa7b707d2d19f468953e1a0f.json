{"ast":null,"code":"import _asyncToGenerator from\"/home/brent/Documents/PlatformIO/Projects/ESP32_C3_Test/interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/brent/Documents/PlatformIO/Projects/ESP32_C3_Test/interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/brent/Documents/PlatformIO/Projects/ESP32_C3_Test/interface/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import{Button,Checkbox,Dialog,DialogActions,DialogContent,DialogTitle}from'@mui/material';import{BlockFormControlLabel,ValidatedPasswordField,ValidatedTextField}from'../../components';import{validate}from'../../validators';import{updateValue}from'../../utils';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UserForm=function UserForm(_ref){var creating=_ref.creating,validator=_ref.validator,user=_ref.user,setUser=_ref.setUser,onDoneEditing=_ref.onDoneEditing,onCancelEditing=_ref.onCancelEditing;var updateFormValue=updateValue(setUser);var _useState=useState(),_useState2=_slicedToArray(_useState,2),fieldErrors=_useState2[0],setFieldErrors=_useState2[1];var open=!!user;useEffect(function(){if(open){setFieldErrors(undefined);}},[open]);var validateAndDone=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!user){_context.next=11;break;}_context.prev=1;setFieldErrors(undefined);_context.next=5;return validate(validator,user);case 5:onDoneEditing();_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);setFieldErrors(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function validateAndDone(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Dialog,{onClose:onCancelEditing,\"aria-labelledby\":\"user-form-dialog-title\",open:!!user,fullWidth:true,maxWidth:\"sm\",children:user&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(DialogTitle,{id:\"user-form-dialog-title\",children:[creating?'Add':'Modify',\" User\"]}),/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsx(ValidatedTextField,{fieldErrors:fieldErrors,name:\"username\",label:\"Username\",fullWidth:true,variant:\"outlined\",value:user.username,disabled:!creating,onChange:updateFormValue,margin:\"normal\"}),/*#__PURE__*/_jsx(ValidatedPasswordField,{fieldErrors:fieldErrors,name:\"password\",label:\"Password\",fullWidth:true,variant:\"outlined\",value:user.password,onChange:updateFormValue,margin:\"normal\"}),/*#__PURE__*/_jsx(BlockFormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{name:\"admin\",checked:user.admin,onChange:updateFormValue}),label:\"Admin?\"})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:onCancelEditing,color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:validateAndDone,color:\"primary\",autoFocus:true,children:\"Done\"})]})]})});};export default UserForm;","map":{"version":3,"sources":["/home/brent/Documents/PlatformIO/Projects/ESP32_C3_Test/interface/src/framework/security/UserForm.tsx"],"names":["React","useState","useEffect","Button","Checkbox","Dialog","DialogActions","DialogContent","DialogTitle","BlockFormControlLabel","ValidatedPasswordField","ValidatedTextField","validate","updateValue","UserForm","creating","validator","user","setUser","onDoneEditing","onCancelEditing","updateFormValue","fieldErrors","setFieldErrors","open","undefined","validateAndDone","username","password","admin"],"mappings":"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","sourcesContent":["import React, { FC, useState, useEffect } from 'react';\nimport Schema, { ValidateFieldsError } from 'async-validator';\n\nimport { Button, Checkbox, Dialog, DialogActions, DialogContent, DialogTitle } from '@mui/material';\n\nimport { User } from '../../types';\nimport { BlockFormControlLabel, ValidatedPasswordField, ValidatedTextField } from '../../components';\nimport { validate } from '../../validators';\nimport { updateValue } from '../../utils';\n\ninterface UserFormProps {\n  creating: boolean;\n  validator: Schema;\n\n  user?: User;\n  setUser: React.Dispatch<React.SetStateAction<User | undefined>>;\n\n  onDoneEditing: () => void;\n  onCancelEditing: () => void;\n}\n\nconst UserForm: FC<UserFormProps> = ({ creating, validator, user, setUser, onDoneEditing, onCancelEditing }) => {\n\n  const updateFormValue = updateValue(setUser);\n  const [fieldErrors, setFieldErrors] = useState<ValidateFieldsError>();\n  const open = !!user;\n\n  useEffect(() => {\n    if (open) {\n      setFieldErrors(undefined);\n    }\n  }, [open]);\n\n  const validateAndDone = async () => {\n    if (user) {\n      try {\n        setFieldErrors(undefined);\n        await validate(validator, user);\n        onDoneEditing();\n      } catch (errors: any) {\n        setFieldErrors(errors);\n      }\n    }\n  };\n\n  return (\n    <Dialog onClose={onCancelEditing} aria-labelledby=\"user-form-dialog-title\" open={!!user} fullWidth maxWidth=\"sm\">\n      {\n        user &&\n        <>\n          <DialogTitle id=\"user-form-dialog-title\">{creating ? 'Add' : 'Modify'} User</DialogTitle>\n          <DialogContent dividers>\n            <ValidatedTextField\n              fieldErrors={fieldErrors}\n              name=\"username\"\n              label=\"Username\"\n              fullWidth\n              variant=\"outlined\"\n              value={user.username}\n              disabled={!creating}\n              onChange={updateFormValue}\n              margin=\"normal\"\n            />\n            <ValidatedPasswordField\n              fieldErrors={fieldErrors}\n              name=\"password\"\n              label=\"Password\"\n              fullWidth\n              variant=\"outlined\"\n              value={user.password}\n              onChange={updateFormValue}\n              margin=\"normal\"\n            />\n            <BlockFormControlLabel\n              control={\n                <Checkbox\n                  name=\"admin\"\n                  checked={user.admin}\n                  onChange={updateFormValue}\n                />\n              }\n              label=\"Admin?\"\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button variant=\"contained\" onClick={onCancelEditing} color=\"secondary\">\n              Cancel\n            </Button>\n            <Button\n              variant=\"contained\"\n              onClick={validateAndDone}\n              color=\"primary\"\n              autoFocus\n            >\n              Done\n            </Button>\n          </DialogActions>\n        </>\n      }\n    </Dialog>\n  );\n};\n\nexport default UserForm;\n"]},"metadata":{},"sourceType":"module"}