{"ast":null,"code":"import _objectSpread from\"/home/brent/Documents/PlatformIO/Projects/ESP32_C3_Test/interface/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import axios from'axios';export var WS_BASE_URL='/ws/';export var API_BASE_URL='/rest/';export var ACCESS_TOKEN='access_token';export var WEB_SOCKET_ROOT=calculateWebSocketRoot(WS_BASE_URL);export var AXIOS=axios.create({baseURL:API_BASE_URL,headers:{'Content-Type':'application/json'},transformRequest:[function(data,headers){if(headers){if(localStorage.getItem(ACCESS_TOKEN)){headers.Authorization='Bearer '+localStorage.getItem(ACCESS_TOKEN);}if(headers['Content-Type']!=='application/json'){return data;}}return JSON.stringify(data);}]});function calculateWebSocketRoot(webSocketPath){var location=window.location;var webProtocol=location.protocol===\"https:\"?\"wss:\":\"ws:\";return webProtocol+\"//\"+location.host+webSocketPath;}export var uploadFile=function uploadFile(url,file,config){var formData=new FormData();formData.append('file',file);return AXIOS.post(url,formData,_objectSpread({headers:{'Content-Type':'multipart/form-data'}},config||{}));};","map":{"version":3,"sources":["/home/brent/Documents/PlatformIO/Projects/ESP32_C3_Test/interface/src/api/endpoints.ts"],"names":["axios","WS_BASE_URL","API_BASE_URL","ACCESS_TOKEN","WEB_SOCKET_ROOT","calculateWebSocketRoot","AXIOS","create","baseURL","headers","transformRequest","data","localStorage","getItem","Authorization","JSON","stringify","webSocketPath","location","window","webProtocol","protocol","host","uploadFile","url","file","config","formData","FormData","append","post"],"mappings":"sJAAA,MAAOA,CAAAA,KAAP,KAAiD,OAAjD,CAEA,MAAO,IAAMC,CAAAA,WAAW,CAAG,MAApB,CACP,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAArB,CACP,MAAO,IAAMC,CAAAA,YAAY,CAAG,cAArB,CACP,MAAO,IAAMC,CAAAA,eAAe,CAAGC,sBAAsB,CAACJ,WAAD,CAA9C,CAEP,MAAO,IAAMK,CAAAA,KAAK,CAAGN,KAAK,CAACO,MAAN,CAAa,CAChCC,OAAO,CAAEN,YADuB,CAEhCO,OAAO,CAAE,CACP,eAAgB,kBADT,CAFuB,CAKhCC,gBAAgB,CAAE,CAAC,SAACC,IAAD,CAAOF,OAAP,CAAmB,CACpC,GAAIA,OAAJ,CAAa,CACX,GAAIG,YAAY,CAACC,OAAb,CAAqBV,YAArB,CAAJ,CAAwC,CACtCM,OAAO,CAACK,aAAR,CAAwB,UAAYF,YAAY,CAACC,OAAb,CAAqBV,YAArB,CAApC,CACD,CACD,GAAIM,OAAO,CAAC,cAAD,CAAP,GAA4B,kBAAhC,CAAoD,CAClD,MAAOE,CAAAA,IAAP,CACD,CACF,CACD,MAAOI,CAAAA,IAAI,CAACC,SAAL,CAAeL,IAAf,CAAP,CACD,CAViB,CALc,CAAb,CAAd,CAkBP,QAASN,CAAAA,sBAAT,CAAgCY,aAAhC,CAAuD,CACrD,GAAMC,CAAAA,QAAQ,CAAGC,MAAM,CAACD,QAAxB,CACA,GAAME,CAAAA,WAAW,CAAGF,QAAQ,CAACG,QAAT,GAAsB,QAAtB,CAAiC,MAAjC,CAA0C,KAA9D,CACA,MAAOD,CAAAA,WAAW,CAAG,IAAd,CAAqBF,QAAQ,CAACI,IAA9B,CAAqCL,aAA5C,CACD,CAOD,MAAO,IAAMM,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,GAAD,CAAcC,IAAd,CAA0BC,MAA1B,CAA4E,CACpG,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACAD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBJ,IAAxB,EAEA,MAAOnB,CAAAA,KAAK,CAACwB,IAAN,CAAWN,GAAX,CAAgBG,QAAhB,gBACLlB,OAAO,CAAE,CACP,eAAgB,qBADT,CADJ,EAIDiB,MAAM,EAAI,EAJT,EAAP,CAMD,CAVM","sourcesContent":["import axios, { AxiosPromise, CancelToken } from 'axios';\n\nexport const WS_BASE_URL = '/ws/';\nexport const API_BASE_URL = '/rest/';\nexport const ACCESS_TOKEN = 'access_token';\nexport const WEB_SOCKET_ROOT = calculateWebSocketRoot(WS_BASE_URL);\n\nexport const AXIOS = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  transformRequest: [(data, headers) => {\n    if (headers) {\n      if (localStorage.getItem(ACCESS_TOKEN)) {\n        headers.Authorization = 'Bearer ' + localStorage.getItem(ACCESS_TOKEN);\n      }\n      if (headers['Content-Type'] !== 'application/json') {\n        return data;\n      }\n    }\n    return JSON.stringify(data);\n  }]\n});\n\nfunction calculateWebSocketRoot(webSocketPath: string) {\n  const location = window.location;\n  const webProtocol = location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n  return webProtocol + \"//\" + location.host + webSocketPath;\n}\n\nexport interface FileUploadConfig {\n  cancelToken?: CancelToken;\n  onUploadProgress?: (progressEvent: ProgressEvent) => void;\n}\n\nexport const uploadFile = (url: string, file: File, config?: FileUploadConfig): AxiosPromise<void> => {\n  const formData = new FormData();\n  formData.append('file', file);\n\n  return AXIOS.post(url, formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    },\n    ...(config || {})\n  });\n};\n"]},"metadata":{},"sourceType":"module"}