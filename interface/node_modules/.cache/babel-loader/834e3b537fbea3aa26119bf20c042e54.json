{"ast":null,"code":"import _asyncToGenerator from\"/home/brent/Downloads/esp8266-react/interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/brent/Downloads/esp8266-react/interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/brent/Downloads/esp8266-react/interface/node_modules/@babel/runtime/regenerator/index.js\";import{useCallback,useEffect,useState}from\"react\";import{useSnackbar}from'notistack';import{extractErrorMessage}from\".\";export var useRest=function useRest(_ref){var read=_ref.read,update=_ref.update;var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),saving=_useState2[0],setSaving=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var loadData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setData(undefined);setErrorMessage(undefined);_context.prev=2;_context.t0=setData;_context.next=6;return read();case 6:_context.t1=_context.sent.data;(0,_context.t0)(_context.t1);_context.next=15;break;case 10:_context.prev=10;_context.t2=_context[\"catch\"](2);message=extractErrorMessage(_context.t2,'Problem loading data');enqueueSnackbar(message,{variant:'error'});setErrorMessage(message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);})),[read,enqueueSnackbar]);var save=useCallback(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(toSave){var message;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(update){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setSaving(true);setErrorMessage(undefined);_context2.prev=4;_context2.t0=setData;_context2.next=8;return update(toSave);case 8:_context2.t1=_context2.sent.data;(0,_context2.t0)(_context2.t1);enqueueSnackbar(\"Update successful\",{variant:'success'});_context2.next=18;break;case 13:_context2.prev=13;_context2.t2=_context2[\"catch\"](4);message=extractErrorMessage(_context2.t2,'Problem saving data');enqueueSnackbar(message,{variant:'error'});setErrorMessage(message);case 18:_context2.prev=18;setSaving(false);return _context2.finish(18);case 21:case\"end\":return _context2.stop();}}},_callee2,null,[[4,13,18,21]]);}));return function(_x){return _ref3.apply(this,arguments);};}(),[update,enqueueSnackbar]);var saveData=function saveData(){return data&&save(data);};useEffect(function(){loadData();},[loadData]);return{loadData:loadData,saveData:saveData,saving:saving,setData:setData,data:data,errorMessage:errorMessage};};","map":null,"metadata":{},"sourceType":"module"}