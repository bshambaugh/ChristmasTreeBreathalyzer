{"ast":null,"code":"import{useContext,useEffect}from'react';import{Navigate,Routes,Route,useLocation}from'react-router-dom';import{useSnackbar}from'notistack';import{Authentication,AuthenticationContext}from'./contexts/authentication';import{FeaturesContext}from'./contexts/features';import{RequireAuthenticated,RequireUnauthenticated}from'./components';import SignIn from'./SignIn';import AuthenticatedRouting from'./AuthenticatedRouting';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RootRedirect=function RootRedirect(_ref){var message=_ref.message,variant=_ref.variant,signOut=_ref.signOut;var authenticationContext=useContext(AuthenticationContext);var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;useEffect(function(){signOut&&authenticationContext.signOut(false);enqueueSnackbar(message,{variant:variant});},[message,variant,signOut,authenticationContext,enqueueSnackbar]);return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});};export var RemoveTrailingSlashes=function RemoveTrailingSlashes(){var location=useLocation();return location.pathname.match('/.*/$')&&/*#__PURE__*/_jsx(Navigate,{to:{pathname:location.pathname.replace(/\\/+$/,\"\"),search:location.search}});};var AppRouting=function AppRouting(){var _useContext=useContext(FeaturesContext),features=_useContext.features;return/*#__PURE__*/_jsxs(Authentication,{children:[/*#__PURE__*/_jsx(RemoveTrailingSlashes,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/unauthorized\",element:/*#__PURE__*/_jsx(RootRedirect,{message:\"Please log in to continue\",signOut:true})}),/*#__PURE__*/_jsx(Route,{path:\"/firmwareUpdated\",element:/*#__PURE__*/_jsx(RootRedirect,{message:\"Firmware update successful\",variant:\"success\"})}),features.security&&/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(RequireUnauthenticated,{children:/*#__PURE__*/_jsx(SignIn,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/*\",element:/*#__PURE__*/_jsx(RequireAuthenticated,{children:/*#__PURE__*/_jsx(AuthenticatedRouting,{})})})]})]});};export default AppRouting;","map":null,"metadata":{},"sourceType":"module"}