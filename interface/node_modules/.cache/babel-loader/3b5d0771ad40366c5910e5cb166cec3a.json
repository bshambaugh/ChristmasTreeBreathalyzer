{"ast":null,"code":"import{useContext,useEffect}from'react';import{Navigate,Routes,Route,useLocation}from'react-router-dom';import{useSnackbar}from'notistack';import{Authentication,AuthenticationContext}from'./contexts/authentication';import{FeaturesContext}from'./contexts/features';import{RequireAuthenticated,RequireUnauthenticated}from'./components';import SignIn from'./SignIn';import AuthenticatedRouting from'./AuthenticatedRouting';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RootRedirect=function RootRedirect(_ref){var message=_ref.message,variant=_ref.variant,signOut=_ref.signOut;var authenticationContext=useContext(AuthenticationContext);var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;useEffect(function(){signOut&&authenticationContext.signOut(false);enqueueSnackbar(message,{variant:variant});},[message,variant,signOut,authenticationContext,enqueueSnackbar]);return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});};export var RemoveTrailingSlashes=function RemoveTrailingSlashes(){var location=useLocation();return location.pathname.match('/.*/$')&&/*#__PURE__*/_jsx(Navigate,{to:{pathname:location.pathname.replace(/\\/+$/,\"\"),search:location.search}});};var AppRouting=function AppRouting(){var _useContext=useContext(FeaturesContext),features=_useContext.features;return/*#__PURE__*/_jsxs(Authentication,{children:[/*#__PURE__*/_jsx(RemoveTrailingSlashes,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/unauthorized\",element:/*#__PURE__*/_jsx(RootRedirect,{message:\"Please log in to continue\",signOut:true})}),/*#__PURE__*/_jsx(Route,{path:\"/firmwareUpdated\",element:/*#__PURE__*/_jsx(RootRedirect,{message:\"Firmware update successful\",variant:\"success\"})}),features.security&&/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(RequireUnauthenticated,{children:/*#__PURE__*/_jsx(SignIn,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/*\",element:/*#__PURE__*/_jsx(RequireAuthenticated,{children:/*#__PURE__*/_jsx(AuthenticatedRouting,{})})})]})]});};export default AppRouting;","map":{"version":3,"sources":["/home/brent/Documents/PlatformIO/Projects/ESP32_C3_Test/interface/src/AppRouting.tsx"],"names":["useContext","useEffect","Navigate","Routes","Route","useLocation","useSnackbar","Authentication","AuthenticationContext","FeaturesContext","RequireAuthenticated","RequireUnauthenticated","SignIn","AuthenticatedRouting","RootRedirect","message","variant","signOut","authenticationContext","enqueueSnackbar","RemoveTrailingSlashes","location","pathname","match","replace","search","AppRouting","features","security"],"mappings":"AAAA,OAAaA,UAAb,CAAyBC,SAAzB,KAA0C,OAA1C,CACA,OAASC,QAAT,CAAmBC,MAAnB,CAA2BC,KAA3B,CAAkCC,WAAlC,KAAqD,kBAArD,CACA,OAASC,WAAT,KAAyC,WAAzC,CAEA,OAASC,cAAT,CAAyBC,qBAAzB,KAAsD,2BAAtD,CACA,OAASC,eAAT,KAAgC,qBAAhC,CACA,OAASC,oBAAT,CAA+BC,sBAA/B,KAA6D,cAA7D,CAEA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,oBAAP,KAAiC,wBAAjC,C,wFAQA,GAAMC,CAAAA,YAAuC,CAAG,QAA1CA,CAAAA,YAA0C,MAAmC,IAAhCC,CAAAA,OAAgC,MAAhCA,OAAgC,CAAvBC,OAAuB,MAAvBA,OAAuB,CAAdC,OAAc,MAAdA,OAAc,CACjF,GAAMC,CAAAA,qBAAqB,CAAGlB,UAAU,CAACQ,qBAAD,CAAxC,CACA,iBAA4BF,WAAW,EAAvC,CAAQa,eAAR,cAAQA,eAAR,CACAlB,SAAS,CAAC,UAAM,CACdgB,OAAO,EAAIC,qBAAqB,CAACD,OAAtB,CAA8B,KAA9B,CAAX,CACAE,eAAe,CAACJ,OAAD,CAAU,CAAEC,OAAO,CAAPA,OAAF,CAAV,CAAf,CACD,CAHQ,CAGN,CAACD,OAAD,CAAUC,OAAV,CAAmBC,OAAnB,CAA4BC,qBAA5B,CAAmDC,eAAnD,CAHM,CAAT,CAIA,mBAAQ,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAR,CACD,CARD,CAUA,MAAO,IAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,EAAM,CACzC,GAAMC,CAAAA,QAAQ,CAAGhB,WAAW,EAA5B,CACA,MAAOgB,CAAAA,QAAQ,CAACC,QAAT,CAAkBC,KAAlB,CAAwB,OAAxB,gBACL,KAAC,QAAD,EACE,EAAE,CAAE,CACFD,QAAQ,CAAED,QAAQ,CAACC,QAAT,CAAkBE,OAAlB,CAA0B,MAA1B,CAAkC,EAAlC,CADR,CAEFC,MAAM,CAAEJ,QAAQ,CAACI,MAFf,CADN,EADF,CAQD,CAVM,CAYP,GAAMC,CAAAA,UAAc,CAAG,QAAjBA,CAAAA,UAAiB,EAAM,CAC3B,gBAAqB1B,UAAU,CAACS,eAAD,CAA/B,CAAQkB,QAAR,aAAQA,QAAR,CAEA,mBACE,MAAC,cAAD,yBACE,KAAC,qBAAD,IADF,cAEE,MAAC,MAAD,yBACE,KAAC,KAAD,EACE,IAAI,CAAC,eADP,CAEE,OAAO,cAAE,KAAC,YAAD,EAAc,OAAO,CAAC,2BAAtB,CAAkD,OAAO,KAAzD,EAFX,EADF,cAKE,KAAC,KAAD,EACE,IAAI,CAAC,kBADP,CAEE,OAAO,cAAE,KAAC,YAAD,EAAc,OAAO,CAAC,4BAAtB,CAAmD,OAAO,CAAC,SAA3D,EAFX,EALF,CASGA,QAAQ,CAACC,QAAT,eACC,KAAC,KAAD,EACE,IAAI,CAAC,GADP,CAEE,OAAO,cAEL,KAAC,sBAAD,wBACE,KAAC,MAAD,IADF,EAJJ,EAVJ,cAmBE,KAAC,KAAD,EACE,IAAI,CAAC,IADP,CAEE,OAAO,cACL,KAAC,oBAAD,wBACE,KAAC,oBAAD,IADF,EAHJ,EAnBF,GAFF,GADF,CAiCD,CApCD,CAsCA,cAAeF,CAAAA,UAAf","sourcesContent":["import { FC, useContext, useEffect } from 'react';\nimport { Navigate, Routes, Route, useLocation } from 'react-router-dom';\nimport { useSnackbar, VariantType } from 'notistack';\n\nimport { Authentication, AuthenticationContext } from './contexts/authentication';\nimport { FeaturesContext } from './contexts/features';\nimport { RequireAuthenticated, RequireUnauthenticated } from './components';\n\nimport SignIn from './SignIn';\nimport AuthenticatedRouting from './AuthenticatedRouting';\n\ninterface SecurityRedirectProps {\n  message: string;\n  variant?: VariantType;\n  signOut?: boolean;\n}\n\nconst RootRedirect: FC<SecurityRedirectProps> = ({ message, variant, signOut }) => {\n  const authenticationContext = useContext(AuthenticationContext);\n  const { enqueueSnackbar } = useSnackbar();\n  useEffect(() => {\n    signOut && authenticationContext.signOut(false);\n    enqueueSnackbar(message, { variant });\n  }, [message, variant, signOut, authenticationContext, enqueueSnackbar]);\n  return (<Navigate to=\"/\" />);\n};\n\nexport const RemoveTrailingSlashes = () => {\n  const location = useLocation();\n  return location.pathname.match('/.*/$') && (\n    <Navigate\n      to={{\n        pathname: location.pathname.replace(/\\/+$/, \"\"),\n        search: location.search\n      }}\n    />\n  );\n};\n\nconst AppRouting: FC = () => {\n  const { features } = useContext(FeaturesContext);\n\n  return (\n    <Authentication>\n      <RemoveTrailingSlashes />\n      <Routes>\n        <Route\n          path=\"/unauthorized\"\n          element={<RootRedirect message=\"Please log in to continue\" signOut />}\n        />\n        <Route\n          path=\"/firmwareUpdated\"\n          element={<RootRedirect message=\"Firmware update successful\" variant=\"success\" />}\n        />\n        {features.security &&\n          <Route\n            path=\"/\"\n            element={\n\n              <RequireUnauthenticated>\n                <SignIn />\n              </RequireUnauthenticated>\n            }\n          />}\n        <Route\n          path=\"/*\"\n          element={\n            <RequireAuthenticated>\n              <AuthenticatedRouting />\n            </RequireAuthenticated>\n          }\n        />\n      </Routes>\n    </Authentication>\n  );\n};\n\nexport default AppRouting;\n"]},"metadata":{},"sourceType":"module"}