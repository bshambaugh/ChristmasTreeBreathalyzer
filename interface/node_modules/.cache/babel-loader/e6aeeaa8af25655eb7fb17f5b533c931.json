{"ast":null,"code":"import{Avatar,Button,Divider,List,ListItem,ListItemAvatar,ListItemText,useTheme}from\"@mui/material\";import DeviceHubIcon from'@mui/icons-material/DeviceHub';import RefreshIcon from'@mui/icons-material/Refresh';import ReportIcon from'@mui/icons-material/Report';import*as MqttApi from\"../../api/mqtt\";import{MqttDisconnectReason}from\"../../types\";import{ButtonRow,FormLoader,SectionContent}from\"../../components\";import{useRest}from\"../../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var mqttStatusHighlight=function mqttStatusHighlight(_ref,theme){var enabled=_ref.enabled,connected=_ref.connected;if(!enabled){return theme.palette.info.main;}if(connected){return theme.palette.success.main;}return theme.palette.error.main;};export var mqttStatus=function mqttStatus(_ref2){var enabled=_ref2.enabled,connected=_ref2.connected;if(!enabled){return\"Not enabled\";}if(connected){return\"Connected\";}return\"Disconnected\";};export var disconnectReason=function disconnectReason(_ref3){var disconnect_reason=_ref3.disconnect_reason;switch(disconnect_reason){case MqttDisconnectReason.TCP_DISCONNECTED:return\"TCP disconnected\";case MqttDisconnectReason.MQTT_UNACCEPTABLE_PROTOCOL_VERSION:return\"Unacceptable protocol version\";case MqttDisconnectReason.MQTT_IDENTIFIER_REJECTED:return\"Client ID rejected\";case MqttDisconnectReason.MQTT_SERVER_UNAVAILABLE:return\"Server unavailable\";case MqttDisconnectReason.MQTT_MALFORMED_CREDENTIALS:return\"Malformed credentials\";case MqttDisconnectReason.MQTT_NOT_AUTHORIZED:return\"Not authorized\";case MqttDisconnectReason.ESP8266_NOT_ENOUGH_SPACE:return\"Device out of memory\";case MqttDisconnectReason.TLS_BAD_FINGERPRINT:return\"Server fingerprint invalid\";default:return\"Unknown\";}};var MqttStatusForm=function MqttStatusForm(){var _useRest=useRest({read:MqttApi.readMqttStatus}),loadData=_useRest.loadData,data=_useRest.data,errorMessage=_useRest.errorMessage;var theme=useTheme();var content=function content(){if(!data){return/*#__PURE__*/_jsx(FormLoader,{onRetry:loadData,errorMessage:errorMessage});}var renderConnectionStatus=function renderConnectionStatus(){if(data.connected){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{children:\"#\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Client ID\",secondary:data.client_id})]}),/*#__PURE__*/_jsx(Divider,{variant:\"inset\",component:\"li\"})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(ReportIcon,{})})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Disconnect Reason\",secondary:disconnectReason(data)})]}),/*#__PURE__*/_jsx(Divider,{variant:\"inset\",component:\"li\"})]});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(List,{children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:mqttStatusHighlight(data,theme)},children:/*#__PURE__*/_jsx(DeviceHubIcon,{})})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Status\",secondary:mqttStatus(data)})]}),/*#__PURE__*/_jsx(Divider,{variant:\"inset\",component:\"li\"}),data.enabled&&renderConnectionStatus()]}),/*#__PURE__*/_jsx(ButtonRow,{pt:1,children:/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(RefreshIcon,{}),variant:\"contained\",color:\"secondary\",onClick:loadData,children:\"Refresh\"})})]});};return/*#__PURE__*/_jsx(SectionContent,{title:\"MQTT Status\",titleGutter:true,children:content()});};export default MqttStatusForm;","map":null,"metadata":{},"sourceType":"module"}