{"ast":null,"code":"import _asyncToGenerator from\"/home/brent/Downloads/esp8266-react/interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/brent/Downloads/esp8266-react/interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/brent/Downloads/esp8266-react/interface/node_modules/@babel/runtime/regenerator/index.js\";import{useCallback,useEffect,useState}from'react';import*as FeaturesApi from'../../api/features';import{extractErrorMessage}from'../../utils';import{ApplicationError,LoadingSpinner}from'../../components';import{FeaturesContext}from'.';import{jsx as _jsx}from\"react/jsx-runtime\";var FeaturesLoader=function FeaturesLoader(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),errorMessage=_useState2[0],setErrorMessage=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),features=_useState4[0],setFeatures=_useState4[1];var loadFeatures=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return FeaturesApi.readFeatures();case 3:response=_context.sent;setFeatures(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);setErrorMessage(extractErrorMessage(_context.t0,'Failed to fetch application details.'));case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);})),[]);useEffect(function(){loadFeatures();},[loadFeatures]);if(features){return/*#__PURE__*/_jsx(FeaturesContext.Provider,{value:{features:features},children:props.children});}if(errorMessage){return/*#__PURE__*/_jsx(ApplicationError,{message:errorMessage});}return/*#__PURE__*/_jsx(LoadingSpinner,{height:\"100vh\"});};export default FeaturesLoader;","map":null,"metadata":{},"sourceType":"module"}