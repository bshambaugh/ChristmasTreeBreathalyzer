{"ast":null,"code":"import _asyncToGenerator from\"/home/brent/Downloads/esp8266-react/interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/brent/Downloads/esp8266-react/interface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/brent/Downloads/esp8266-react/interface/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import{Button,Checkbox,Dialog,DialogActions,DialogContent,DialogTitle}from'@mui/material';import{BlockFormControlLabel,ValidatedPasswordField,ValidatedTextField}from'../../components';import{validate}from'../../validators';import{updateValue}from'../../utils';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UserForm=function UserForm(_ref){var creating=_ref.creating,validator=_ref.validator,user=_ref.user,setUser=_ref.setUser,onDoneEditing=_ref.onDoneEditing,onCancelEditing=_ref.onCancelEditing;var updateFormValue=updateValue(setUser);var _useState=useState(),_useState2=_slicedToArray(_useState,2),fieldErrors=_useState2[0],setFieldErrors=_useState2[1];var open=!!user;useEffect(function(){if(open){setFieldErrors(undefined);}},[open]);var validateAndDone=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!user){_context.next=11;break;}_context.prev=1;setFieldErrors(undefined);_context.next=5;return validate(validator,user);case 5:onDoneEditing();_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);setFieldErrors(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function validateAndDone(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Dialog,{onClose:onCancelEditing,\"aria-labelledby\":\"user-form-dialog-title\",open:!!user,fullWidth:true,maxWidth:\"sm\",children:user&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(DialogTitle,{id:\"user-form-dialog-title\",children:[creating?'Add':'Modify',\" User\"]}),/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsx(ValidatedTextField,{fieldErrors:fieldErrors,name:\"username\",label:\"Username\",fullWidth:true,variant:\"outlined\",value:user.username,disabled:!creating,onChange:updateFormValue,margin:\"normal\"}),/*#__PURE__*/_jsx(ValidatedPasswordField,{fieldErrors:fieldErrors,name:\"password\",label:\"Password\",fullWidth:true,variant:\"outlined\",value:user.password,onChange:updateFormValue,margin:\"normal\"}),/*#__PURE__*/_jsx(BlockFormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{name:\"admin\",checked:user.admin,onChange:updateFormValue}),label:\"Admin?\"})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:onCancelEditing,color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:validateAndDone,color:\"primary\",autoFocus:true,children:\"Done\"})]})]})});};export default UserForm;","map":null,"metadata":{},"sourceType":"module"}