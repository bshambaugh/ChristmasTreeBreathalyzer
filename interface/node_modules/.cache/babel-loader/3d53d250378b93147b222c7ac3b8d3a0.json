{"ast":null,"code":"import{useCallback,useContext,useEffect}from'react';import{Navigate,Routes,Route,useNavigate,useLocation}from'react-router-dom';import{FeaturesContext}from'./contexts/features';import*as AuthenticationApi from'./api/authentication';import{PROJECT_PATH}from'./api/env';import{AXIOS}from'./api/endpoints';import{Layout,RequireAdmin}from'./components';import ProjectRouting from'./project/ProjectRouting';import WiFiConnection from'./framework/wifi/WiFiConnection';import AccessPoint from'./framework/ap/AccessPoint';import NetworkTime from'./framework/ntp/NetworkTime';import Mqtt from'./framework/mqtt/Mqtt';import System from'./framework/system/System';import Security from'./framework/security/Security';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AuthenticatedRouting=function AuthenticatedRouting(){var _useContext=useContext(FeaturesContext),features=_useContext.features;var location=useLocation();var navigate=useNavigate();var handleApiResponseError=useCallback(function(error){if(error.response&&error.response.status===401){AuthenticationApi.storeLoginRedirect(location);navigate(\"/unauthorized\");}return Promise.reject(error);},[location,navigate]);useEffect(function(){var axiosHandlerId=AXIOS.interceptors.response.use(function(response){return response;},handleApiResponseError);return function(){return AXIOS.interceptors.response.eject(axiosHandlerId);};},[handleApiResponseError]);return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(Routes,{children:[features.project&&/*#__PURE__*/_jsx(Route,{path:\"/\".concat(PROJECT_PATH,\"/*\"),element:/*#__PURE__*/_jsx(ProjectRouting,{})}),/*#__PURE__*/_jsx(Route,{path:\"/wifi/*\",element:/*#__PURE__*/_jsx(WiFiConnection,{})}),/*#__PURE__*/_jsx(Route,{path:\"/ap/*\",element:/*#__PURE__*/_jsx(AccessPoint,{})}),features.ntp&&/*#__PURE__*/_jsx(Route,{path:\"/ntp/*\",element:/*#__PURE__*/_jsx(NetworkTime,{})}),features.mqtt&&/*#__PURE__*/_jsx(Route,{path:\"/mqtt/*\",element:/*#__PURE__*/_jsx(Mqtt,{})}),features.security&&/*#__PURE__*/_jsx(Route,{path:\"/security/*\",element:/*#__PURE__*/_jsx(RequireAdmin,{children:/*#__PURE__*/_jsx(Security,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/system/*\",element:/*#__PURE__*/_jsx(System,{})}),/*#__PURE__*/_jsx(Route,{path:\"/*\",element:/*#__PURE__*/_jsx(Navigate,{to:AuthenticationApi.getDefaultRoute(features)})})]})});};export default AuthenticatedRouting;","map":null,"metadata":{},"sourceType":"module"}